# Telegram Parser

Этот скрипт парсит сообщения из указанных Telegram-каналов и пересылает их в целевой чат или канал с помощью Telegram-бота.

## Возможности

-   Пересылка сообщений из нескольких каналов-источников.
-   Обработка текста, фото, видео и документов.
-   Корректная пересылка медиагрупп (альбомов).
-   Включение ссылки на источник в пересланное сообщение.
-   Обрезка длинных сообщений для соответствия лимиту Telegram (во избежание для аккаунтов без Telegram Premium).
-   Повторные попытки отправки сообщений при тайм-аутах.

## Установка

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/LavrCode/tg-parser
    cd tg-parser
    ```

2.  **Установите зависимости:**
    ```bash
    pip install -r requirements.txt
    ```

3.  **Создайте файл `.env`:**
    Создайте файл с именем `.env` в корне проекта и добавьте следующие переменные окружения:

    ```dotenv
    API_ID=ВАШ_TELEGRAM_API_ID
    API_HASH=ВАШ_TELEGRAM_API_HASH
    BOT_TOKEN=ТОКЕН_ВАШЕГО_БОТА
    TARGET_CHAT_ID=ID_ЦЕЛЕВОГО_ЧАТА 
    # Опционально: TARGET_THREAD_ID=ID_ЦЕЛЕВОЙ_ТЕМЫ 
    ```

    -   `API_ID` и `API_HASH`: Получите их на [my.telegram.org](https://my.telegram.org/apps).
    -   `BOT_TOKEN`: Получите его у @BotFather в Telegram.
    -   `TARGET_CHAT_ID`: ID чата или канала, куда бот должен пересылать сообщения.
    -   `TARGET_THREAD_ID`: (Опционально) Если вы хотите отправлять сообщения в определенную тему (топик) внутри целевого чата, раскомментируйте и установите эту переменную.

4.  **Настройте каналы-источники:**
    Измените список `RAW_CHANNELS` в файле `main.py`, чтобы включить публичные ссылки на каналы, которые вы хотите парсить.

## Запуск скрипта

1.  **Первый запуск (сессия Pyrogram):**
    При первом запуске скрипта Pyrogram попросит вас войти в свой аккаунт Telegram (тот, который связан с вашими `API_ID` и `API_HASH`). Следуйте инструкциям в терминале. Это создаст файл сессии (например, `YOUR_SESSION_NAME.session`).
    ```bash
    python main.py
    ```

2.  **Последующие запуски:**
    После создания файла сессии вы можете запускать скрипт как обычно.
    ```bash
    python main.py
    ```

Скрипт будет постоянно отслеживать указанные каналы и пересылать новые посты в ваш целевой чат.

## Автор

Разработано с ❤️ **[LavrCode](https://lavrcode.t.me/)**.
